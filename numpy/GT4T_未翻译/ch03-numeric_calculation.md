<h1>Table of Contents<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><span><a href="#æ•°å­¦å‡½æ•°" data-toc-modified-id="æ•°å­¦å‡½æ•°-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>æ•°å­¦å‡½æ•° </a></span><ul class="toc-item"><li><span><a href="#ä¸‰è§’/åŒæ›²å‡½æ•°" data-toc-modified-id="ä¸‰è§’/åŒæ›²å‡½æ•°-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>ä¸‰è§’ / åŒæ›²å‡½æ•° </a></span></li><li><span><a href="#æŒ‡æ•°å’Œå¯¹æ•°" data-toc-modified-id="æŒ‡æ•°å’Œå¯¹æ•°-1.2"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>æŒ‡æ•°å’Œå¯¹æ•° </a></span></li><li><span><a href="#ç®—æœ¯æ“ä½œ" data-toc-modified-id="ç®—æœ¯æ“ä½œ-1.3"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>ç®—æœ¯æ“ä½œ </a></span></li><li><span><a href="#è‡ªåŠ¨åŸŸ" data-toc-modified-id="è‡ªåŠ¨åŸŸ-1.4"><span class="toc-item-num">1.4&nbsp;&nbsp;</span>è‡ªåŠ¨åŸŸ </a></span></li></ul></li><li><span><a href="#æ•°å€¼è®¡ç®—" data-toc-modified-id="æ•°å€¼è®¡ç®—-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>æ•°å€¼è®¡ç®— </a></span><ul class="toc-item"><li><span><a href="#èˆå…¥" data-toc-modified-id="èˆå…¥-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>èˆå…¥ </a></span></li><li><span><a href="#å’Œç§¯å·®" data-toc-modified-id="å’Œç§¯å·®-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>å’Œç§¯å·® </a></span></li><li><span><a href="#ç¬¦å·å‡½æ•°" data-toc-modified-id="ç¬¦å·å‡½æ•°-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>ç¬¦å·å‡½æ•° </a></span></li><li><span><a href="#æˆªæ–­" data-toc-modified-id="æˆªæ–­-2.4"><span class="toc-item-num">2.4&nbsp;&nbsp;</span>æˆªæ–­ </a></span></li><li><span><a href="#æ’å€¼" data-toc-modified-id="æ’å€¼-2.5"><span class="toc-item-num">2.5&nbsp;&nbsp;</span>æ’å€¼ </a></span></li></ul></li><li><span><a href="#å¯¼æ•°å’Œå¾®ç§¯åˆ†" data-toc-modified-id="å¯¼æ•°å’Œå¾®ç§¯åˆ†-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>å¯¼æ•°å’Œå¾®ç§¯åˆ† </a></span><ul class="toc-item"><li><span><a href="#æ¢¯åº¦" data-toc-modified-id="æ¢¯åº¦-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>æ¢¯åº¦ </a></span></li><li><span><a href="#æ¢¯å½¢å…¬å¼" data-toc-modified-id="æ¢¯å½¢å…¬å¼-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>æ¢¯å½¢å…¬å¼ </a></span></li></ul></li><li><span><a href="#å¤šé¡¹å¼" data-toc-modified-id="å¤šé¡¹å¼-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>å¤šé¡¹å¼ </a></span><ul class="toc-item"><li><span><a href="#ç®€ä»‹" data-toc-modified-id="ç®€ä»‹-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>ç®€ä»‹ </a></span></li><li><span><a href="#ä¾¿æ·ç±»" data-toc-modified-id="ä¾¿æ·ç±»-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>ä¾¿æ·ç±» </a></span></li></ul></li><li><span><a href="#å…³ç³»è¿ç®—" data-toc-modified-id="å…³ç³»è¿ç®—-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>å…³ç³»è¿ç®—</a></span><ul class="toc-item"><li><span><a href="#çœŸå€¼æµ‹è¯•" data-toc-modified-id="çœŸå€¼æµ‹è¯•-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>çœŸå€¼æµ‹è¯• </a></span></li><li><span><a href="#å€¼å’Œç±»å‹" data-toc-modified-id="å€¼å’Œç±»å‹-5.2"><span class="toc-item-num">5.2&nbsp;&nbsp;</span>å€¼å’Œç±»å‹ </a></span></li><li><span><a href="#é€»è¾‘è¿ç®—" data-toc-modified-id="é€»è¾‘è¿ç®—-5.3"><span class="toc-item-num">5.3&nbsp;&nbsp;</span>é€»è¾‘è¿ç®— </a></span></li><li><span><a href="#æ¯”è¾ƒ" data-toc-modified-id="æ¯”è¾ƒ-5.4"><span class="toc-item-num">5.4&nbsp;&nbsp;</span>æ¯”è¾ƒ </a></span></li></ul></li><li><span><a href="#äºŒè¿›åˆ¶è¿ç®—" data-toc-modified-id="äºŒè¿›åˆ¶è¿ç®—-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>äºŒè¿›åˆ¶è¿ç®— </a></span><ul class="toc-item"><li><span><a href="#ä½è¿ç®—" data-toc-modified-id="ä½è¿ç®—-6.1"><span class="toc-item-num">6.1&nbsp;&nbsp;</span>ä½è¿ç®— </a></span></li><li><span><a href="#å·¦å³ç§»" data-toc-modified-id="å·¦å³ç§»-6.2"><span class="toc-item-num">6.2&nbsp;&nbsp;</span>å·¦å³ç§» </a></span></li><li><span><a href="#æ‰“åŒ…è§£åŒ…" data-toc-modified-id="æ‰“åŒ…è§£åŒ…-6.3"><span class="toc-item-num">6.3&nbsp;&nbsp;</span>æ‰“åŒ…è§£åŒ… </a></span></li></ul></li><li><span><a href="#å­—ç¬¦ä¸²" data-toc-modified-id="å­—ç¬¦ä¸²-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>å­—ç¬¦ä¸² </a></span><ul class="toc-item"><li><span><a href="#åŸºæœ¬æ“ä½œ" data-toc-modified-id="åŸºæœ¬æ“ä½œ-7.1"><span class="toc-item-num">7.1&nbsp;&nbsp;</span>åŸºæœ¬æ“ä½œ </a></span></li><li><span><a href="#æ¯”è¾ƒ" data-toc-modified-id="æ¯”è¾ƒ-7.2"><span class="toc-item-num">7.2&nbsp;&nbsp;</span>æ¯”è¾ƒ </a></span></li><li><span><a href="#åŸºæœ¬ä¿¡æ¯" data-toc-modified-id="åŸºæœ¬ä¿¡æ¯-7.3"><span class="toc-item-num">7.3&nbsp;&nbsp;</span>åŸºæœ¬ä¿¡æ¯ </a></span></li></ul></li><li><span><a href="#å°ç»“" data-toc-modified-id="å°ç»“-8"><span class="toc-item-num">8&nbsp;&nbsp;</span>å°ç»“ </a></span></li><li><span><a href="#å‚è€ƒ" data-toc-modified-id="å‚è€ƒ-9"><span class="toc-item-num">9&nbsp;&nbsp;</span>å‚è€ƒ </a></span></li></ul></div>


```python
import numpy as np
np.__version__
```




    '1.22.3'



æ–‡æ¡£é˜…è¯»è¯´æ˜ï¼š

- ğŸ§ è¡¨ç¤º Tip
- âš ï¸ è¡¨ç¤ºæ³¨æ„äº‹é¡¹

## æ•°å­¦å‡½æ•°

NumPyå†…ç½®äº†å¾ˆå¤šæ•°å­¦å‡½æ•°ï¼ŒåŒ…æ‹¬ï¼š

- ä¸‰è§’/åŒæ›²å‡½æ•°
- å››èˆäº”å…¥
- å’Œã€ç§¯ã€å·®
- å¯¼æ•°å’Œå¾®ç§¯åˆ†
- æŒ‡æ•°å’Œå¯¹æ•°
- ç®—æœ¯æ“ä½œ
- ç»¼åˆ

å…³äºè¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå¯¹æ¯”è¾ƒç®€å•çš„å°±è·³è¿‡äº†ï¼Œå¯ä»¥å‚è€ƒï¼š

- [Mathematical functions â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.math.html)

### ä¸‰è§’/åŒæ›²å‡½æ•°

ä¸‰è§’å‡½æ•°å’ŒåŒæ›²ä¸­å¤§éƒ¨åˆ†éƒ½å¾ˆå®¹æ˜“ç†è§£ï¼Œä¹Ÿéƒ½æ˜¯é€šå‡½æ•°ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€ä¸ªçœ‹èµ·æ¥ä¸å¤ªæ˜æ˜¾çš„ï¼š`unwrap`ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯å¯¹å‘¨æœŸå–å¤§å¢é‡è¡¥ç ã€‚å‚æ•°å¦‚ä¸‹ï¼š

- pï¼šæ•°ç»„
- discontï¼šæ•°å€¼é—´çš„æœ€å¤§ä¸­æ–­ï¼Œé»˜è®¤`period/2`ï¼Œä½äºè¯¥å€¼çš„è¢«è®¾ä¸ºè¯¥å€¼
- axisï¼šè½´ï¼Œé»˜è®¤æœ€åä¸€ä¸ªè½´
- periodï¼šå‘¨æœŸèŒƒå›´ï¼Œé»˜è®¤`2pi`


```python
phase = np.linspace(0, np.pi, num=5)
phase[3:] += np.pi
phase
```




    array([0.        , 0.78539816, 1.57079633, 5.49778714, 6.28318531])




```python
# è¶…è¿‡piçš„ï¼Œå‰ªæ‰period
np.unwrap(phase)
```




    array([ 0.        ,  0.78539816,  1.57079633, -0.78539816,  0.        ])




```python
# è¦å‡æ‰ 1 ä¸ªå‘¨æœŸ
np.unwrap([1, 5]), 5 - 2*np.pi
```




    (array([ 1.        , -1.28318531]), -1.2831853071795862)




```python
# è¦å‡æ‰3ä¸ªå‘¨æœŸ
np.unwrap([1, 20]), 20 - 3*2*np.pi
```




    (array([1.        , 1.15044408]), 1.1504440784612413)




```python
# è¶…è¿‡ pi çš„å¤„ç†æ‰ï¼
np.unwrap([1, 1.1+np.pi]), 1.1+np.pi-2*np.pi
```




    (array([ 1.        , -2.04159265]), -2.0415926535897935)



å†çœ‹å‡ ä¸ªä¾‹å­ï¼š


```python
# è¶…è¿‡4/2ï¼ŒåŠ 4
np.unwrap([0, 1, 2, -1, 0], period=4)
```




    array([0, 1, 2, 3, 4])




```python
# ä¸ºä»€ä¹ˆè¦åŠ è€Œä¸æ˜¯å‡ï¼Œå› ä¸ºåªæœ‰åŠ æ‰èƒ½æ»¡è¶³æ¡ä»¶
np.unwrap([1, -2, -1, 0], period=4)
```




    array([1, 2, 3, 4])




```python
# åŒä¸Šï¼Œ5 åé¢çš„æ•°å­—éƒ½è¦åŠ  4
np.unwrap([2, 3, 4, 5, 2, 3, 4, 5], period=4)
```




    array([2, 3, 4, 5, 6, 7, 8, 9])



å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`deg2rad` == `radians`ï¼Œ`rad2deg` == `degrees`ï¼Œå‰é¢çš„è¡¨è¾¾æ›´åŠ æ¸…æ™°ä¸€äº›ã€‚

æ›´å¤šç»†èŠ‚å¯æŸ¥é˜…ï¼š

- https://numpy.org/devdocs/reference/routines.math.html

### æŒ‡æ•°å’Œå¯¹æ•°

å¤§éƒ¨åˆ†çš„APIéƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæ¯”å¦‚è‡ªç„¶æŒ‡æ•°`np.exp`ï¼Œ2ä¸ºåº•æŒ‡æ•°`np.exp2`ç­‰ï¼Œå¯¹åº”çš„logä¹Ÿæœ‰`np.log`ï¼Œ`np.log2`ï¼Œ`np.log10`ç­‰ï¼Œè€Œä¸”æ‰€æœ‰APIéƒ½æ˜¯é€šå‡½æ•°ã€‚

å¦å¤–ï¼Œä¹Ÿæœ‰`np.expm1`è¡¨ç¤ºexpåå‡1ï¼Œå¯¹åº”çš„å°±æ˜¯åŠ 1ålogçš„`np.log1p`ï¼š


```python
np.log(np.exp(2)), np.log1p(np.expm1(2))
```




    (2.0, 2.0)



è¿˜æœ‰ä¸¤ä¸ªæ±‚å’Œçš„`np.logaddexp`å’Œä»¥2ä¸ºåº•çš„`np.logaddexp2`ï¼Œè®¡ç®—å…¬å¼ï¼š`log(exp(x1) + exp(x2))`


```python
np.logaddexp([1], [2]), np.log(np.exp(1) + np.exp(2))
```




    (array([2.31326169]), 2.3132616875182226)




```python
np.logaddexp2([1], [2]), np.log2(np.exp2(1) + np.exp2(2))
```




    (array([2.5849625]), 2.584962500721156)



`np.frexp`å’Œ`np.ldexp`æ˜¯ä¸€å¯¹æ“ä½œï¼Œåè€…ç­‰äº`x1 * 2**x2`ï¼Œè€Œå‰è€…æ˜¯å°†ä¸€ä¸ªæ•°ç»„åˆ†è§£æˆmantissaå’Œexponentï¼Œè€Œä¾æ®å°±æ˜¯`x = mantissa * 2**exponent`ï¼Œå°±æ˜¯å¯¹åº”å‰é¢çš„x1å’Œx2äº†ã€‚


```python
np.ldexp(2, np.arange(5)), 2 * 2**np.arange(5)
```




    (array([ 2.,  4.,  8., 16., 32.], dtype=float16), array([ 2,  4,  8, 16, 32]))




```python
np.frexp(np.arange(2, 5))
```




    (array([0.5 , 0.75, 0.5 ]), array([2, 2, 3], dtype=int32))




```python
np.array([0.5, 0.75, 0.5]) * 2 ** np.array([2, 2, 3]), np.arange(2, 5)
```




    (array([2., 3., 4.]), array([2, 3, 4]))



### ç®—æœ¯æ“ä½œ

ä¸»è¦æ˜¯ä¸­å°å­¦å­¦è¿‡çš„åŠ å‡ä¹˜é™¤ã€ä¹˜æ–¹ã€å¼€æ–¹ã€å–ä½™ã€å€’æ•°ã€ç»å¯¹å€¼ï¼Œä»¥åŠå¯¹åº”çš„ä¸€äº›ç‰¹æ®Šæ–¹æ³•ç­‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½æ˜¯é€šå‡½æ•°ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ç‰¹æ®Šçš„ã€‚

å…³äºé™¤æ³•å’ŒPythonçš„ç±»ä¼¼ï¼š


```python
# åœ°æ¿é™¤ï¼Œç­‰ä»·äºpythonçš„ //
np.floor_divide(5, 2)
```




    2




```python
np.floor_divide([7, 8], [3, 5])
```




    array([2, 1])



ç»å¯¹å€¼æœ‰ç›¸åº”çš„å…¼å®¹å¤æ•°çš„æ–¹æ³•ã€‚


```python
np.abs(-1-1j)
```




    1.4142135623730951




```python
np.fabs(-1-1j)
```


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    <ipython-input-412-0b4518d62178> in <module>
    ----> 1 np.fabs(-1-1j)
    

    TypeError: ufunc 'fabs' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''


è¿˜æœ‰å‡ ä¸ªå…³äºå–ä½™çš„æ–¹æ³•ï¼š


```python
# ç­‰ä»·äºPythonçš„ x1%x2
np.remainder(np.arange(3), 2)
```




    array([0, 1, 0])




```python
# å’Œ np.reminder ä¸€æ ·
np.mod([12, 13], [4, 5])
```




    array([0, 3])




```python
# mod ç»“æœçš„ç¬¦å·æ˜¯x2çš„ç¬¦å·
np.mod([-3, -2, -1, 1, 2, 3], 2)
```




    array([1, 0, 1, 1, 0, 1])




```python
np.mod([2, 3], -2)
```




    array([ 0, -1])




```python
# è€Œfmod ç»“æœçš„ç¬¦å·æ˜¯x1çš„ç¬¦å·
np.fmod([-3, -2, -1, 1, 2, 3], 2)
```




    array([-1,  0, -1,  1,  0,  1])




```python
np.fmod([2, 3], -2)
```




    array([0, 1])



æ¥ä¸‹æ¥è¿™ä¸¤ä¸ªç¨å¾®ä¸ä¸€æ ·äº›ã€‚


```python
# æŒ‰å…ƒç´ è¿”å›æ•°ç»„çš„å°æ•°éƒ¨åˆ†å’Œæ•´æ•°éƒ¨åˆ†ã€‚
np.modf([0, 3.5, 2.0])
```




    (array([0. , 0.5, 0. ]), array([0., 3., 2.]))




```python
np.modf(-1)
```




    (-0.0, -1.0)




```python
# åŒæ—¶è¿”å›(x // y, x % y)
np.divmod([12, 13, 15], 2)
```




    (array([6, 6, 7]), array([0, 1, 1]))




```python
np.divmod([-3, -2, -1, 1, 2, 3], 2)
```




    (array([-2, -1, -1,  0,  1,  1]), array([1, 0, 1, 1, 0, 1]))



è¿˜æœ‰ä¸¤ä¸ªå°å­¦æ•°å­¦ç”¨è¿‡çš„ï¼šæœ€å¤§å…¬å€æ•°å’Œæœ€å°å…¬çº¦æ•°ã€‚


```python
# æœ€å°å…¬å€æ•°
np.lcm(12, 20)
```




    60




```python
# å¤šä¸ªå€¼å¯ä»¥ç”¨reduce
np.lcm.reduce([2, 3, 5, 8])
```




    120




```python
# åŒæ—¶æ±‚å¤šä¸ª
np.lcm([2, 3, 5, 8], 3)
```




    array([ 6,  3, 15, 24])




```python
# æœ€å¤§å…¬çº¦æ•°
np.gcd(12, 20)
```




    4




```python
np.gcd.reduce([15, 20, 30])
```




    5




```python
np.gcd([2, 3, 5, 8], 20)
```




    array([2, 1, 5, 4])



### è‡ªåŠ¨åŸŸ

å‡½æ•°çš„è¾“å‡ºæ•°æ®ç±»å‹ä¸è¾“å…¥çš„æŸäº›åŸŸä¸­çš„è¾“å…¥æ•°æ®ç±»å‹ä¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨`np.emath`ã€‚

æ”¯æŒä»¥ä¸‹APIï¼š
- `sqrt`, `power`
- `log`, `log2`, `log10`, `logn`
- `arccos`, `arcsin`, `arctan`


```python
np.emath.sqrt(-1)
```




    1j




```python
np.sqrt(-1)
```

    <ipython-input-565-597592b72a04>:1: RuntimeWarning: invalid value encountered in sqrt
      np.sqrt(-1)
    




    nan




```python
import math
np.emath.log(-math.exp(1)) == 1+1j*math.pi
```




    True




```python
np.power([2, 4], -2)
```


    ---------------------------------------------------------------------------

    ValueError                                Traceback (most recent call last)

    <ipython-input-575-f02dcfa4fde4> in <module>
    ----> 1 np.power([2, 4], -2)
    

    ValueError: Integers to negative integer powers are not allowed.



```python
np.emath.power([2, 4], -2)
```




    array([0.25  , 0.0625])




```python
# å¦‚æœxåŒ…å«è´Ÿæ•°åˆ™è½¬ä¸ºå¤æ•°
np.emath.power([-2, 4], 1)
```




    array([-2.+0.j,  4.+0.j])



## æ•°å€¼è®¡ç®—

### èˆå…¥

ç„¶åæ˜¯å››èˆäº”å…¥ï¼Œ`round`å’Œ`around`ä¸€æ ·ã€‚


```python
rng = np.random.default_rng(42)
arr = rng.random((2,3))
arr
```




    array([[0.77395605, 0.43887844, 0.85859792],
           [0.69736803, 0.09417735, 0.97562235]])




```python
np.around(arr, 2)
```




    array([[0.77, 0.44, 0.86],
           [0.7 , 0.09, 0.98]])




```python
np.array(arr).round(2)
```




    array([[0.77, 0.44, 0.86],
           [0.7 , 0.09, 0.98]])



å…¶ä»–çš„æ¥å£éƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œé™¤äº†`fix`çš„å…¶ä»–å‡½æ•°éƒ½æ˜¯é€šå‡½æ•°ã€‚å¦‚ä¸‹ï¼Œä¸å†èµ˜è¿°ï¼š


```python
lst = [2.1, -1.5, 3.2, 4.9]
```


```python
np.fix(lst)
```




    array([ 2., -1.,  3.,  4.])




```python
np.trunc(lst)
```




    array([ 2., -1.,  3.,  4.])




```python
np.rint(lst)
```




    array([ 2., -2.,  3.,  5.])




```python
np.floor(lst)
```




    array([ 2., -2.,  3.,  4.])




```python
np.ceil(lst)
```




    array([ 3., -1.,  4.,  5.])



### å’Œç§¯å·®

è¿™é‡ŒåŒ…å«äº†åŸºç¡€å’Œç§¯å’Œç´¯ç§¯å’Œç§¯ï¼Œä»¥åŠå¯¹åº”çš„æœ‰ç©ºå€¼ï¼ˆ`nan`ï¼‰ç‰ˆæœ¬ï¼ŒAPIéƒ½æ¯”è¾ƒç®€å•ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°ã€‚ä¸»è¦ä»‹ç»å‰©ä¸‹çš„å‡ ä¸ªä¸å¤ªç†Ÿæ‚‰çš„ã€‚

é¦–å…ˆæ˜¯`diff`ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š

- æ•°ç»„
- è®¡ç®—æ¬¡æ•°ï¼Œå°±æ˜¯è®¡ç®—å‡ æ¬¡diff
- ç»´åº¦
- prepend/appendï¼šæ²¿ç€ç»´åº¦æ”¾åœ¨åŸæ•°ç»„å‰é¢/åé¢ç„¶åå†è®¡ç®—


```python
rng = np.random.default_rng(42)
a = rng.integers(0, 10, (3, 4))
a
```




    array([[0, 7, 6, 4],
           [4, 8, 0, 6],
           [2, 0, 5, 9]])




```python
np.diff(a)
```




    array([[ 7, -1, -2],
           [ 4, -8,  6],
           [-2,  5,  4]])




```python
# æ³¨æ„ï¼Œè¿ç»­ç®—ä¸¤æ¬¡
np.diff(a, 2)
```




    array([[ -8,  -1],
           [-12,  14],
           [  7,  -1]])




```python
np.diff(a, 2, append=[[0], [0], [0]])
```




    array([[ -8,  -1,  -2],
           [-12,  14, -12],
           [  7,  -1, -13]])




```python
# ç­‰ä»·äº
pd = np.full((3, 1), 0)
cct = np.concatenate((a, pd), axis=1)
np.diff(cct, 2)
```




    array([[ -8,  -1,  -2],
           [-12,  14, -12],
           [  7,  -1, -13]])




```python
# prepend åŒç†
np.diff(a, 2, prepend=[[0], [0], [0]])
```




    array([[  7,  -8,  -1],
           [  0, -12,  14],
           [ -4,   7,  -1]])



å€¼å¾—ä¸€æçš„æ˜¯ä¹Ÿå¯ä»¥å¯¹æ—¶é—´è¿›è¡Œå¤„ç†ï¼š


```python
dts = np.arange("2022-01-02", "2022-01-05", dtype=np.datetime64)
np.diff(dts, 1)
```




    array([1, 1], dtype='timedelta64[D]')



`np.ediff1d`ä¼šå…ˆflatternå†diffï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ç»´ã€‚

### ç¬¦å·å‡½æ•°


```python
# å°äº0ä¸º-1ï¼Œç­‰äº0ï¼Œä¸º0ï¼Œå¤§äº0ä¸º1
np.sign([-5, 0, 5])
```




    array([-1,  0,  1])




```python
# x1<0æ—¶ä¸º0ï¼Œx1=0æ—¶ä¸ºx2ï¼Œx1>0æ—¶ä¸º1
np.heaviside([-5, 0, 5], 0.5)
```




    array([0. , 0.5, 1. ])



### æˆªæ–­


```python
# æˆªæ–­
np.clip(np.arange(10).reshape(2,5), a_min=3, a_max=7)
```




    array([[3, 3, 3, 3, 4],
           [5, 6, 7, 7, 7]])



### æ’å€¼

`np.interp`æ˜¯ä¸€ç»´çº¿æ€§æ’å€¼æ–¹æ³•ï¼Œæ”¯æŒå¼§åº¦ã€‚


```python
def func(x):
    return  2 * x + 3
```


```python
x = np.arange(1, 5)
y = func(x)
x, y
```




    (array([1, 2, 3, 4]), array([ 5,  7,  9, 11]))




```python
np.interp([2.5, 8], x, y), func(2.5), func(8)
```




    (array([ 8., 11.]), 8.0, 19)




```python
# æŒ‡å®šå·¦å³è¾¹ç•Œ
np.interp([0.5, 2, 5.5], x, y)
```




    array([ 5.,  7., 11.])




```python
np.interp([0.5, 2, 5.5], x, y, left=1, right=60)
```




    array([ 1.,  7., 60.])



## å¯¼æ•°å’Œå¾®ç§¯åˆ†

### æ¢¯åº¦

æ¢¯åº¦æ˜¯ä½¿ç”¨å†…éƒ¨ç‚¹ä¸­çš„äºŒé˜¶ç²¾ç¡®ä¸­å¿ƒå·®å’Œè¾¹ç•Œå¤„çš„ä¸€é˜¶ç²¾ç¡®å•ä¾§ï¼ˆå‘å‰æˆ–å‘åï¼‰å·®å¼‚è®¡ç®—çš„ã€‚

ä¸»è¦æ˜¯åˆ©ç”¨æ³°å‹’äºŒé˜¶å±•å¼€è®¡ç®—å¯¼æ•°ï¼š

$$
f(x) \approx f\left(x_{0}\right)+f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)+\frac{f^{\prime \prime}\left(x_{0}\right)}{2 !}\left(x-x_{0}\right)^{2}+\frac{f^{\prime \prime \prime}\left(x_{0}\right)}{3 !}\left(x-x_{0}\right)^{3}+\cdots .
$$

ç­‰ä»·äºï¼š

$$
f(x_0 + h) \approx f\left(x_{0}\right)+f^{\prime}\left(x_{0}\right) (h)+\frac{f^{\prime \prime}\left(x_{0}\right)}{2 !} h^{2}+ O(h^3)
$$

åˆæœ‰ï¼š

$$
f(x_0 - h) \approx f\left(x_{0}\right)
-f^{\prime}\left(x_{0}\right) (h)+\frac{f^{\prime \prime}\left(x_{0}\right)}{2 !} h^{2}
 + O(h^3)
$$

ä¸¤å¼ç›¸å‡ï¼Œå¾—åˆ°ï¼š

$$
f(x_0 + h) - f(x_0 - h) = 2 \cdot f^{\prime}(x_0)(h) 
$$

å³ï¼š

$$
f^{\prime} (x_0) = \frac{f(x_0 + h) - f(x_0 - h)}{2h} + O(h^2)
$$

æ¥ä¸‹æ¥å°±æ˜¯åˆ©ç”¨ä¸Šå¼æ¥è®¡ç®—æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰ã€‚

å‚æ•°å¦‚ä¸‹ï¼š

- fï¼Œå°±æ˜¯f(x)ï¼Œæ•°ç»„
- varargsï¼šfå€¼çš„é—´éš”ï¼Œæœ‰å¤šç§å¯èƒ½çš„å–å€¼
- edge_orderï¼šåœ¨è¾¹ç•Œæ—¶é‡‡ç”¨é¡ºåº1æˆ–2è®¡ç®—
- axisï¼šåæ ‡è½´


```python
# è¡¨ç¤ºf(0)=1, f(1)=2 ...
fx = np.array([1, 2, 4, 7, 11, 16])
```


```python
# é»˜è®¤ h=1ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªï¼ˆè¾¹ç•Œï¼‰æœ‰ç‚¹ç‰¹æ®Š
# f'(0) = (f(0+1) - f(0))   / 1 = (2-1)/1   = 1
# f'(1) = (f(1+1) - f(1-1)) / 2 = (4-1)/2*1 = 1.5
# f'(2) = (f(2+1) - f(2-1)) / 2 = (7-2)/2*1 = 2.5
# ...
# f'(5) = (f(5) - f(5-1))   / 1 = (16-11)/1 = 5
np.gradient(fx)
```




    array([1. , 1.5, 2.5, 3.5, 4.5, 5. ])




```python
# h è¿™ä¸ªå¯ä»¥ä¸ºå…¶ä»–æ•°ï¼Œæ¯”å¦‚0.5ï¼Œæ­¤æ—¶è¡¨ç¤º f(0)=1, f(0.5)=2 ...
# f'(0.0) = (f(0+0.5)   - f(0))       / 0.5   = (2-1)/0.5   = 2
# f'(0.5) = (f(0.5+0.5) - f(0.5-0.5)) / 2*0.5 = (4-1)/1.0   = 3
# f'(1.0) = (f(1.0+0.5) - f(1.0-0.5)) / 2*0.5 = (7-2)/1.0   = 5
# ...
# f'(2.5) = (f(2.5)     - f(2.5-0.5)) / 2*0.5 = (16-11)/0.5 = 10
np.gradient(fx, 0.5)
```




    array([ 2.,  3.,  5.,  7.,  9., 10.])



è¾“å…¥æ•°ç»„ï¼Œä¼šæŒ‰ç…§è¡Œåˆ—åˆ†åˆ«è®¡ç®—åè¿”å›ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåæ ‡è½´ã€‚


```python
rng = np.random.default_rng(42)
arr = rng.integers(1, 10, (2, 3))
arr
```




    array([[1, 7, 6],
           [4, 4, 8]])




```python
np.gradient(arr)
```




    [array([[ 3., -3.,  2.],
            [ 3., -3.,  2.]]),
     array([[ 6. ,  2.5, -1. ],
            [ 0. ,  2. ,  4. ]])]




```python
np.gradient(arr[:, 0]), np.gradient(arr[:, 1]), np.gradient(arr[:, 2])
```




    (array([3., 3.]), array([-3., -3.]), array([2., 2.]))




```python
np.gradient(arr[0,:]), np.gradient(arr[1,:])
```




    (array([ 6. ,  2.5, -1. ]), array([0., 2., 4.]))




```python
# æŒ‡å®šåæ ‡è½´
np.gradient(arr, axis=0)
```




    array([[ 3., -3.,  2.],
           [ 3., -3.,  2.]])



ç¬¬äºŒä¸ªå‚æ•°`varargs`æ§åˆ¶fxå€¼ä¹‹é—´çš„é—´éš”ï¼Œä½†å®ƒæœ‰å¤šç§æ–¹å¼ï¼š

- 1. å•ä¸ªæ ‡é‡ï¼Œç”¨äºæŒ‡å®šæ‰€æœ‰å°ºå¯¸çš„æ ·æœ¬è·ç¦»
- 2. N ä¸ªæ ‡é‡ï¼Œç”¨äºä¸ºæ¯ä¸ªç»´åº¦æŒ‡å®šæ’å®šçš„é‡‡æ ·è·ç¦»ï¼Œå³ â€œdxâ€ï¼Œ â€œdyâ€ï¼Œ â€œdzâ€ï¼Œ ...
- 3. N ä¸ªæ•°ç»„ï¼Œç”¨äºæŒ‡å®šå€¼æ²¿ F çš„æ¯ä¸ªç»´åº¦çš„åæ ‡ï¼Œæ•°ç»„çš„é•¿åº¦å¿…é¡»ä¸ç›¸åº”å°ºå¯¸çš„å¤§å°åŒ¹é…
- 4. N ä¸ªæ ‡é‡/æ•°ç»„çš„ä»»æ„ç»„åˆï¼Œå«ä¹‰ä¸º 2 å’Œ 3

ä¸Šé¢çš„ä¾‹å­æ˜¯æœ€ç®€å•çš„ã€Œå•ä¸ªæ ‡é‡ã€çš„æƒ…å†µï¼Œæ¥ä¸‹æ¥çœ‹Nä¸ªæ ‡é‡çš„æƒ…å†µã€‚

$$
a = \frac{\frac{-dx_2}{dx_1}}{ dx_1+dx_2} \\
b = \frac{1}{dx_1} - \frac{1}{dx_2} \\
c = \frac{\frac{dx_1}{dx_2}}{ dx_1+dx_2} \\
a + b + c = 0
$$


```python
# N ä¸ªæ ‡é‡
x = np.array([0, 1, 1.5, 3.5, 4, 6])
fx = np.array([ 1,  2,  4,  7, 11, 16])
np.gradient(fx, x)
```




    array([1. , 3. , 3.5, 6.7, 6.9, 2.5])




```python
ax_dx = np.diff(x)

dx1 = ax_dx[0:-1]
dx2 = ax_dx[1:]
a = -dx2 / (dx1 * (dx1 + dx2))
b = (dx2 - dx1) / (dx1 * dx2)
c = dx1 / (dx2 * (dx1 + dx2))

N = fx.ndim

slice1 = [slice(None)]*N
slice2 = [slice(None)]*N
slice3 = [slice(None)]*N
slice4 = [slice(None)]*N
axis = 0
slice1[axis] = slice(1, -1)
slice2[axis] = slice(None, -2)
slice3[axis] = slice(1, -1)
slice4[axis] = slice(2, None)
```


```python
a, b, c
```




    (array([-0.33333333, -1.6       , -0.1       , -1.6       ]),
     array([-1. ,  1.5, -1.5,  1.5]),
     array([1.33333333, 0.1       , 1.6       , 0.1       ]))




```python
fx[tuple(slice2)], fx[tuple(slice3)], fx[tuple(slice4)]
```




    (array([1, 2, 4, 7]), array([ 2,  4,  7, 11]), array([ 4,  7, 11, 16]))




```python
# out[1:-1] = a * f[:-2] + b * f[1:-1] + c * f[2:]
out = np.empty_like(fx, dtype=np.float16)
out[tuple(slice1)] = a * fx[tuple(slice2)] + b * fx[tuple(slice3)] + c * fx[tuple(slice4)]
out
```




    array([0. , 3. , 3.5, 6.7, 6.9, 0. ], dtype=float16)



å¤šä¸ªæ•°ç»„æˆ–æ•°ç»„ä¸æ ‡é‡çš„ç»„åˆï¼Œæ­¤æ—¶ä¼šåˆ†åˆ«å¯¹åº”åˆ°å„è‡ªè½´ä¸Šè®¡ç®—ï¼š


```python
arr
```




    array([[1, 7, 6],
           [4, 4, 8]])




```python
np.gradient(arr, [3,5], [1,2,3])
```




    [array([[ 1.5, -1.5,  1. ],
            [ 1.5, -1.5,  1. ]]),
     array([[ 6. ,  2.5, -1. ],
            [ 0. ,  2. ,  4. ]])]




```python
np.gradient(arr, [3,5], axis=0)
```




    array([[ 1.5, -1.5,  1. ],
           [ 1.5, -1.5,  1. ]])




```python
np.gradient(arr, [1,2,3], axis=1)
```




    array([[ 6. ,  2.5, -1. ],
           [ 0. ,  2. ,  4. ]])



è¿˜æœ‰ä¸€ä¸ª`edge_order`å‚æ•°éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå®ƒä¸»è¦æ§åˆ¶åœ¨è¾¹ç•Œä½ç½®å¦‚ä½•è®¡ç®—æ¢¯åº¦ã€‚


```python
x = np.array([1, 2, 4, 7])
y = x ** 2 + 2 * x + 1
y
```




    array([ 4,  9, 25, 64])




```python
np.gradient(y, x), 2*x + 2., np.gradient(y, x, edge_order=2)
```




    (array([ 5.,  6., 10., 13.]),
     array([ 4.,  6., 10., 16.]),
     array([ 4.,  6., 10., 16.]))




```python
(9 - 4)/(2-1), (64-25)/(7-4)
```




    (5.0, 13.0)



å…·ä½“å…¬å¼å¦‚ä¸‹ï¼š

$$
f'({x_l}) = \frac{f(x_l + h) - f(x_l)}{h} \\
f'({x_r}) = \frac{f(x_r) - f(x_r - h)}{h} \\
$$

### æ¢¯å½¢å…¬å¼

å¦ä¸€ä¸ªAPIæ˜¯æ¢¯å½¢å…¬å¼ï¼Œå¯ç”¨æ¥æ±‚ç§¯åˆ†ï¼ŒåŸç†å°±æ˜¯æŠŠè¢«ç§¯å‡½æ•°åˆ‡æˆå¾ˆå¤šä¸ªå°çš„æ¢¯å½¢ã€‚





$$
\int_{a}^{b} f(x) d x \approx \frac{\Delta x}{2}\left(f\left(x_{0}\right)+2 f\left(x_{1}\right)+2 f\left(x_{2}\right)+2 f\left(x_{3}\right)+2 f\left(x_{4}\right)+\cdots+2 f\left(x_{N-1}\right)+f\left(x_{N}\right)\right)
$$

å‚æ•°å¦‚ä¸‹ï¼š

- yï¼Œå°±æ˜¯f(x)
- xï¼Œé»˜è®¤ä¸ºNoneï¼Œå¦‚æœæŒ‡å®šåˆ™æ ¹æ®xçš„å…ƒç´ è®¡ç®—dx
- dxï¼Œé»˜è®¤1.0ï¼Œå¦‚æœæ²¡æœ‰xï¼Œåˆ™ä½¿ç”¨dx
- axisï¼Œåæ ‡è½´

æ›´å¤šå‚è€ƒï¼š

- [Trapezoidal rule - Wikipedia](https://en.wikipedia.org/wiki/Trapezoidal_rule)


```python
y = np.array([1, 2, 3])
x = np.array([4, 6, 8])
```


```python
np.trapz(y), 1/2 * (1 + 2*2 + 3)
```




    (4.0, 4.0)




```python
diff = np.diff(x)
np.trapz(y, x), 1/2*((1+2)*diff[0] + (2+3)*diff[1])
```




    (8.0, 8.0)




```python
z = np.array([1, 2, 4])
diff = np.diff(z)
np.trapz(y, z), 1/2*((1+2)*diff[0] + (2+3)*diff[1])
```




    (6.5, 6.5)




```python
y = np.array([[1, 2, 3], [4, 5, 6]])
y
```




    array([[1, 2, 3],
           [4, 5, 6]])




```python
# æŒ‰è¡Œ
np.trapz(y, axis=1)
```




    array([ 4., 10.])




```python
# åˆ—
np.trapz(y, axis=0)
```




    array([2.5, 3.5, 4.5])



## å¤šé¡¹å¼

å¤šé¡¹å¼çš„åœ¨æ–°çš„ç‰ˆæœ¬æœ‰ä¸“é—¨çš„libraryï¼š`polynomial`ã€‚å…¶ä¸­åŒ…æ‹¬ï¼š

- å¹‚çº§æ•°
- åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼
- åŸƒå°”ç±³ç‰¹å¤šé¡¹å¼ï¼ˆç‰©ç†å­¦ï¼‰
- åŸƒå°”ç±³ç‰¹å¤šé¡¹å¼ï¼ˆæ¦‚ç‡å­¦ï¼‰
- æ‹‰ç›–å°”å¤šé¡¹å¼
- å‹’è®©å¾·å¤šé¡¹å¼

å…·ä½“æ¦‚å¿µå¯å‚è€ƒï¼š

- [å¹‚çº§æ•° - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.m.wikipedia.org/zh-hans/%E5%B9%82%E7%BA%A7%E6%95%B0)
- [åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.wikipedia.org/zh-hans/%E5%88%87%E6%AF%94%E9%9B%AA%E5%A4%AB%E5%A4%9A%E9%A1%B9%E5%BC%8F)
- [åŸƒå°”ç±³ç‰¹å¤šé¡¹å¼ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.m.wikipedia.org/zh-hans/%E5%9F%83%E5%B0%94%E7%B1%B3%E7%89%B9%E5%A4%9A%E9%A1%B9%E5%BC%8F)
- [æ‹‰ç›–å°”å¤šé¡¹å¼ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.wikipedia.org/wiki/%E6%8B%89%E7%9B%96%E5%B0%94%E5%A4%9A%E9%A1%B9%E5%BC%8F)
- [å‹’è®©å¾·å¤šé¡¹å¼ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.m.wikipedia.org/zh/%E5%8B%92%E8%AE%A9%E5%BE%B7%E5%A4%9A%E9%A1%B9%E5%BC%8F)


```python
from numpy.polynomial import Polynomial as P
```

### ç®€ä»‹


```python
# å¹‚åºåˆ—
p = np.polynomial.Polynomial([3, 2, 1])
p
```




$x \mapsto \text{3.0} + \text{2.0}\,x + \text{1.0}\,x^{2}$




```python
p(3)
```




    18.0




```python
rng = np.random.default_rng(42)
x = np.arange(10)
y = x + rng.standard_normal(10) 
```


```python
# æ‹Ÿåˆ
fitted = np.polynomial.Polynomial.fit(x, y, deg=1)
fitted
```




$x \mapsto \text{4.1644286915941295} + \text{4.216899419361024}\,\left(\text{-1.0} + \text{0.2222222222222222}x\right)$




```python
fitted.convert()
```




$x \mapsto \text{-0.05247072776689432} + \text{0.9370887598580052}\,x$




```python
# æ ¹æ®æ ¹å¾—åˆ°è¡¨è¾¾å¼
p = P.fromroots([1, 2])
p
```




$x \mapsto \text{2.0} - \text{3.0}\,x + \text{1.0}\,x^{2}$




```python
p.convert()
```




$x \mapsto \text{2.0} - \text{3.0}\,x + \text{1.0}\,x^{2}$




```python
p.convert(domain=[0,1])
```




$x \mapsto \text{0.75} - \text{1.0}\,\left(\text{-1.0} + \text{2.0}x\right) + \text{0.25}\,\left(\text{-1.0} + \text{2.0}x\right)^{2}$



ç±»å‹ä¹‹é—´è½¬æ¢ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡ä¸å»ºè®®ä½¿ç”¨ã€‚å½“çº§æ•°å¢åŠ æ—¶ä¼šé€ æˆç²¾åº¦æŸå¤±ä¸¥é‡ã€‚


```python
from numpy.polynomial import Chebyshev as T
```


```python
T.cast(p)
```




$x \mapsto \text{2.5}\,{T}_{0}(x) - \text{3.0}\,{T}_{1}(x) + \text{0.5}\,{T}_{2}(x)$




```python
c1 = (1,2,3)
c2 = (3,2,1)
sum = P.polyadd(c1,c2)
```


```python
P.polyval(2, sum)
```




    28.0



### ä¾¿æ·ç±»

NumPyæä¾›äº†ä¸åŒç±»å‹å¤šé¡¹å¼çš„ä¾¿æ·ä½¿ç”¨æ–¹å¼ï¼Œæä¾›äº†ç»Ÿä¸€çš„åˆ›å»ºã€æ“ä½œã€æ‹Ÿåˆæ¥å£ã€‚ä»¥ä¸‹çš„ä»‹ç»ä»¥å¹‚çº§æ•°ä¸ºä¾‹ï¼Œæ›´å¤šå¯è®¿é—®æ–‡æ¡£ã€‚

- [Power Series (numpy.polynomial.polynomial) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.polynomial.html)
- [Chebyshev Series (numpy.polynomial.chebyshev) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.chebyshev.html)
- [Hermite Series, â€œPhysicistsâ€ (numpy.polynomial.hermite) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.hermite.html)
- [HermiteE Series, â€œProbabilistsâ€ (numpy.polynomial.hermite_e) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.hermite_e.html)
- [Laguerre Series (numpy.polynomial.laguerre) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.laguerre.html)
- [Legendre Series (numpy.polynomial.legendre) â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/reference/routines.polynomials.legendre.html)


```python
# åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹
p = P([1, 2, 3])
p
```




$x \mapsto \text{1.0} + \text{2.0}\,x + \text{3.0}\,x^{2}$




```python
p.coef, p.domain, p.window
```




    (array([1., 2., 3.]), array([-1,  1]), array([-1,  1]))




```python
# x_new = -1+x
p1 = P([1, 2, 3], domain=[0, 1], window=[-1, 0])
p1
```




$x \mapsto \text{1.0} + \text{2.0}\,\left(\text{-1.0} + x\right) + \text{3.0}\,\left(\text{-1.0} + x\right)^{2}$




```python
# x_new = -1+x + x
p2 = P([1, 2, 3], domain=[0, 1], window=[-1, 1])
p2
```




$x \mapsto \text{1.0} + \text{2.0}\,\left(\text{-1.0} + \text{2.0}x\right) + \text{3.0}\,\left(\text{-1.0} + \text{2.0}x\right)^{2}$




```python
p3 = P([1, 2, 3], domain=[2, 5], window=[-1, 1])
p3
```




$x \mapsto \text{1.0} + \text{2.0}\,\left(\text{-2.3333333333333335} + \text{0.6666666666666666}x\right) + \text{3.0}\,\left(\text{-2.3333333333333335} + \text{0.6666666666666666}x\right)^{2}$




```python
from numpy.polynomial import polyutils as pu
```


```python
# æ˜ å°„domain
pu.mapparms([2, 5], [-1, 1])
```




    (-2.3333333333333335, 0.6666666666666666)




```python
(5*-1 - 2*1)/(5-2), (1--1)/(5-2)
```




    (-2.3333333333333335, 0.6666666666666666)




```python
print(p)
```

    1.0 + 2.0Â·xÂ¹ + 3.0Â·xÂ²
    

å¯ä»¥é€‰æ‹©ä¸åŒçš„æ‰“å°é£æ ¼ï¼š


```python
np.polynomial.set_default_printstyle("ascii")
```


```python
print(p)
```

    1.0 + 2.0 x**1 + 3.0 x**2
    


```python
# æˆ–
print(f"{p:unicode}")
```

    1.0 + 2.0Â·xÂ¹ + 3.0Â·xÂ²
    

å¤šé¡¹å¼çš„åŸºæœ¬è¿ç®—ï¼š


```python
p + p
```




$x \mapsto \text{2.0} + \text{4.0}\,x + \text{6.0}\,x^{2}$




```python
p - p
```




$x \mapsto \color{LightGray}{\text{0.0}}$




```python
p * p
```




$x \mapsto \text{1.0} + \text{4.0}\,x + \text{10.0}\,x^{2} + \text{12.0}\,x^{3} + \text{9.0}\,x^{4}$




```python
p ** 2
```




$x \mapsto \text{1.0} + \text{4.0}\,x + \text{10.0}\,x^{2} + \text{12.0}\,x^{3} + \text{9.0}\,x^{4}$




```python
p // P([-1, 1])
```




$x \mapsto \text{5.0} + \text{3.0}\,x$




```python
p
```




$x \mapsto \text{1.0} + \text{2.0}\,x + \text{3.0}\,x^{2}$




```python
P([-1, 1]) * P([5, 3])
```




$x \mapsto \text{-5.0} + \text{2.0}\,x + \text{3.0}\,x^{2}$




```python
# å¯ä»¥æ•´é™¤ï¼ˆå› å¼åˆ†è§£ï¼‰
P([2, 3, 1]) == P([1, 1]) * P([2, 1])
```




    True




```python
# å–ä½™
p % P([-1, 1])
```




$x \mapsto \text{6.0}$




```python
# åˆ†è§£+ä½™
divmod(p, P([-1, 1]))
```




    (Polynomial([5., 3.], domain=[-1.,  1.], window=[-1.,  1.]),
     Polynomial([6.], domain=[-1.,  1.], window=[-1.,  1.]))




```python
# æ±‚å€¼
x = np.arange(5)
p(x)
```




    array([ 1.,  6., 17., 34., 57.])




```python
3*x**2 + 2*x + 1.
```




    array([ 1.,  6., 17., 34., 57.])




```python
# åµŒå¥—
p(p)
```




$x \mapsto \text{6.0} + \text{16.0}\,x + \text{36.0}\,x^{2} + \text{36.0}\,x^{3} + \text{27.0}\,x^{4}$




```python
# æ ¹
p.roots()
```




    array([-0.33333333-0.47140452j, -0.33333333+0.47140452j])




```python
# æœ‰æœ‰ç†æ ¹
P([2, -3, 1]).roots()
```




    array([1., 2.])




```python
p
```




$x \mapsto \text{1.0} + \text{2.0}\,x + \text{3.0}\,x^{2}$




```python
p + [1, 2, 3]
```




$x \mapsto \text{2.0} + \text{4.0}\,x + \text{6.0}\,x^{2}$




```python
p + [1,2]
```




$x \mapsto \text{2.0} + \text{4.0}\,x + \text{3.0}\,x^{2}$




```python
p / 2
```




$x \mapsto \text{0.5} + \text{1.0}\,x + \text{1.5}\,x^{2}$



æ³¨æ„ï¼šä¸Šé¢çš„è¿ç®—åœ¨ä¸åŒdomainã€windowæˆ–ç±»å‹æ—¶æ— æ³•ä½¿ç”¨ã€‚


```python
# ä¸åŒdomain
p + P([1], domain=[0, 1])
```


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    <ipython-input-1073-c9477ae81d90> in <module>
          1 # ä¸åŒdomain
    ----> 2 p + P([1], domain=[0, 1])
    

    /usr/local/lib/python3.8/site-packages/numpy/polynomial/_polybase.py in __add__(self, other)
        498 
        499     def __add__(self, other):
    --> 500         othercoef = self._get_coefficients(other)
        501         try:
        502             coef = self._add(self.coef, othercoef)
    

    /usr/local/lib/python3.8/site-packages/numpy/polynomial/_polybase.py in _get_coefficients(self, other)
        282                 raise TypeError("Polynomial types differ")
        283             elif not np.all(self.domain == other.domain):
    --> 284                 raise TypeError("Domains differ")
        285             elif not np.all(self.window == other.window):
        286                 raise TypeError("Windows differ")
    

    TypeError: Domains differ


è®¡ç®—ç§¯åˆ†ï¼š


```python
p = P([3, 2, 1])
p
```




$x \mapsto \text{3.0} + \text{2.0}\,x + \text{1.0}\,x^{2}$




```python
# å®šç§¯åˆ†
p.integ()
```




$x \mapsto \color{LightGray}{\text{0.0}} + \text{3.0}\,x + \text{1.0}\,x^{2} + \text{0.3333333333333333}\,x^{3}$




```python
# æŒ‡å®šç§¯åˆ†æ¬¡æ•°
p.integ(m=2)
```




$x \mapsto \color{LightGray}{\text{0.0}}\color{LightGray}{ + \text{0.0}\,x} + \text{1.5}\,x^{2} + \text{0.3333333333333333}\,x^{3} + \text{0.08333333333333333}\,x^{4}$




```python
# æŒ‡å®šä¸‹ç•Œï¼ˆé»˜è®¤æ˜¯0ï¼‰ä¸º-1ï¼Œå¸¸æ•°é¡¹å‘ç”Ÿå˜åŒ–
p.integ(lbnd=-1)
```




$x \mapsto \text{2.333333333333333} + \text{3.0}\,x + \text{1.0}\,x^{2} + \text{0.3333333333333333}\,x^{3}$




```python
p.integ(k=[1], lbnd=-1)
```




$x \mapsto \text{3.333333333333333} + \text{3.0}\,x + \text{1.0}\,x^{2} + \text{0.3333333333333333}\,x^{3}$



è®¡ç®—å¯¼æ•°ï¼š


```python
p.deriv()
```




$x \mapsto \text{2.0} + \text{2.0}\,x$




```python
p.deriv(2)
```




$x \mapsto \text{2.0}$




```python
p.deriv()(1)
```




    4.0




```python
p.deriv(2)(10)
```




    2.0



## å…³ç³»è¿ç®—

NumPyä¸­çš„å…³ç³»è¿ç®—ä¸€èˆ¬ç”¨äºåˆ¤æ–­æ•°ç»„æ˜¯å¦æ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼Œè¿”å›ç»“æœä¸ºå¸ƒå°”æ•°ç»„ã€‚è¿™éƒ¨åˆ†çš„APIå¤§å¤šéƒ½æ˜¯é€šå‡½æ•°ã€‚

### çœŸå€¼æµ‹è¯•

å¸¸ç”¨äºåˆ¤æ–­å…ƒç´ æ˜¯å¦å…¨éƒ¨æ»¡è¶³æˆ–ä»»ä¸€æ»¡è¶³æ¡ä»¶ã€‚


```python
a = np.array([
    [1, 0, 2],
    [2, 3, 0]
])
```


```python
np.all(a)
```




    False




```python
np.all(a, axis=0)
```




    array([ True, False, False])




```python
np.any(a)
```




    True




```python
np.any(a, axis=0)
```




    array([ True,  True,  True])




```python
np.any([0, 0, 0])
```




    False




```python
np.alltrue(a)
```




    False




```python
np.alltrue([1, 2, 3])
```




    True



### å€¼å’Œç±»å‹

åˆ¤æ–­æ•°ç»„çš„å€¼æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼š

- `isfinite`ï¼šä¸æ˜¯æ— ç©·å¹¶ä¸”ä¸æ˜¯éæ•°å­—
- `isnan`ï¼šéæ•°å­—
- `isnat`ï¼šéæ—¶é—´
- `isinf/isneginf/isposinf`ï¼šæ­£/è´Ÿæ— ç©·

ç±»å‹ï¼š

- `iscomplex`ï¼šå¤æ•°
- `iscomplexobj`ï¼šå¤æ•°ç±»å‹
- `isfortran`ï¼šF-Style
- `isreal`ï¼šå®æ•°
- `isrealobj`ï¼šä¸æ˜¯å¤æ•°ç±»å‹
- `isscalar`ï¼šæ ‡é‡


```python
np.isfinite([np.nan, 0, np.inf, 1])
```




    array([False,  True, False,  True])




```python
np.isnan([np.nan, 2, np.inf])
```




    array([ True, False, False])




```python
np.isnat([np.datetime64("2016-01-01")])
```




    array([False])




```python
# åªæ”¯æŒæ—¶é—´æ ¼å¼
np.isnat([2])
```


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    <ipython-input-48-b44857751f20> in <module>
          1 # åªæ”¯æŒæ—¶é—´æ ¼å¼
    ----> 2 np.isnat([2])
    

    TypeError: ufunc 'isnat' is only defined for datetime and timedelta.



```python
np.isinf([np.nan, np.inf])
```




    array([False,  True])




```python
np.isneginf([np.inf, -np.inf, np.NINF])
```




    array([False,  True,  True])




```python
a = np.array([[2, 3], [1+1j, 0]])
a
```




    array([[2.+0.j, 3.+0.j],
           [1.+1.j, 0.+0.j]])




```python
np.iscomplex(a)
```




    array([[False, False],
           [ True, False]])




```python
np.iscomplexobj(a)
```




    True




```python
np.isreal(a)
```




    array([[ True,  True],
           [False,  True]])




```python
np.isrealobj(a)
```




    False




```python
np.isfortran(a)
```




    False




```python
np.isscalar(np.array([2, 3]))
```




    False




```python
np.isscalar(2)
```




    True




```python
np.isscalar("fdf")
```




    True



### é€»è¾‘è¿ç®—

åŒ…æ‹¬ä¸ã€æˆ–ã€å¼‚æˆ–ã€éï¼Œä»¥ä¸ä¸ºä¾‹ã€‚


```python
np.logical_and(True, False)
```




    False




```python
np.logical_and([2, 3], [4, False])
```




    array([ True, False])




```python
a = np.arange(5)
np.logical_and(a>1, a<4)
```




    array([False, False,  True,  True, False])




```python
# & ç­‰ä»·
np.array([1, 0]) & np.array([0, 1])
```




    array([0, 0])



### æ¯”è¾ƒ

ç›¸è¿‘åˆ¤æ–­ï¼š

`allclose/isclose` ç”¨äºåˆ¤æ–­æ‰€æœ‰å€¼æ˜¯å¦åœ¨é˜ˆå€¼èŒƒå›´å†…ï¼š

$$
|a - b| <= (\text{atol} + \text{rtol}  * |b|)
$$

- atolé»˜è®¤å€¼ä¸º1e-08
- rtolé»˜è®¤å€¼ä¸º1e-05

å¸¸ç”¨äºéªŒè¯ç²¾åº¦ã€‚


```python
np.allclose(1.0000089, 1.000009)
```




    True




```python
np.allclose([1e10, 1e-9], [1.000001e10, 1e-8])
```




    True




```python
np.allclose([1, np.nan], [1, np.nan])
```




    False




```python
np.allclose([1, np.nan], [1, np.nan], equal_nan=True)
```




    True




```python
np.isclose(1.0000089, 1.000009)
```




    True




```python
np.isclose([1e10, 1e-9], [1.000001e10, 1e-8])
```




    array([ True,  True])




```python
np.isclose([1, np.nan], [1, np.nan])
```




    array([ True, False])




```python
np.isclose([1, np.nan], [1, np.nan], equal_nan=True)
```




    array([ True,  True])



ç›¸ç­‰åˆ¤æ–­ï¼š


```python
a = np.array([[1, 2], [3, 4]])
b = np.array([[1, 2], [3, 4]])
c = np.array([[1, np.nan], [3, np.nan]])
d = np.array([[1, np.nan], [3, np.nan]])
```


```python
np.array_equal(a, b)
```




    True




```python
np.array_equal(a, c)
```




    False




```python
np.array_equal(c, d)
```




    False




```python
np.array_equal(c, d, equal_nan=True)
```




    True




```python
a = np.array([1, 2])
b = np.array([[1, 2], [1, 2]])
c = np.array([[1, 2]])
```


```python
np.array_equal(a, b)
```




    False




```python
# shapeä¸€è‡´å€¼ç›¸ç­‰
np.array_equiv(a, b)
```




    True




```python
np.array_equiv(a, c)
```




    True




```python
np.array_equiv(b, c)
```




    True



æ³¨æ„ï¼Œè¿™é‡Œçš„shapeä¸€è‡´æ˜¯æŒ‡ä¸€ä¸ªå¯ä»¥å¹¿æ’­åˆ°å¦ä¸€ä¸ªä¸Šã€‚

æœ€åæ˜¯æ¯”è¾ƒè¿ç®—ï¼ŒåŒ…æ‹¬ï¼š>, >=, <, <=, ==, !=ã€‚


```python
a = np.array([[1, 2], [4, 2]])
b = np.array([[1, 3], [2, 2]])
```


```python
np.greater(a, b)
```




    array([[False, False],
           [ True, False]])




```python
np.greater_equal(a, b)
```




    array([[ True, False],
           [ True,  True]])




```python
np.less(a, b)
```




    array([[False,  True],
           [False, False]])




```python
np.less_equal(a, b)
```




    array([[ True,  True],
           [False,  True]])




```python
np.equal(a, b)
```




    array([[ True, False],
           [False,  True]])




```python
np.not_equal(a, b)
```




    array([[False,  True],
           [ True, False]])



## äºŒè¿›åˆ¶è¿ç®—

ä¸»è¦æ˜¯ä½è¿ç®—ç›¸å…³APIã€‚

é¦–å…ˆæ˜¯é€ä½ä½è¿ç®—ï¼Œå‡ä¸ºé€šå‡½æ•°ï¼ŒåŒ…æ‹¬ï¼šä¸ã€æˆ–ã€å¼‚æˆ–ã€éã€å·¦ç§»ã€å³ç§»ç­‰ã€‚

### ä½è¿ç®—


```python
int("000011", base=2), int("001100", base=2)
```




    (3, 12)




```python
# é€ä½ä¸
np.bitwise_and(3, 12), 3 & 12
```




    (0, 0)




```python
# é
x = np.invert(np.array(13, dtype=np.uint8))
x, 2**7+2**6+2**5+2**4+2
```




    (242, 242)




```python
np.binary_repr(x, width=8), int("00001101", base=2)
```




    ('11110010', 13)



### å·¦å³ç§»

æˆ–ã€å¼‚æˆ–å’Œ ä¸ ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚æ¥ä¸‹æ¥çš„æŒ‰ä½ç§»åŠ¨ï¼Œä»¥å·¦ç§»ä¸ºä¾‹ã€‚


```python
# å·¦ç§»
```


```python
2 << 1
```




    4




```python
np.left_shift(2, 1)
```




    4




```python
np.left_shift(2, [1, 2, 3])
```




    array([ 4,  8, 16])




```python
np.left_shift([1, 2, 3], 2)
```




    array([ 4,  8, 12])



### æ‰“åŒ…è§£åŒ…

æœ€åä»‹ç»ä¸‹æ‰“åŒ…å’Œè§£åŒ…ï¼Œåˆ†åˆ«å°†äºŒè¿›åˆ¶è½¬ä¸º uint8 æ•°ç»„æˆ–åä¹‹ã€‚


```python
arr = np.array([[1, 1, 0], [1, 0, 1]])
```


```python
# æ‰“åŒ…
np.packbits(arr)
```




    array([212], dtype=uint8)




```python
np.packbits(np.ravel(arr))
```




    array([212], dtype=uint8)




```python
# 110101
int("11010100", base=2)
```




    212




```python
# 2**7+2**6 2**7 2**6
np.packbits(arr, axis=0)
```




    array([[192, 128,  64]], dtype=uint8)




```python
# è§£åŒ…ï¼Œæ³¨æ„ï¼Œdtype é¡»ä¸º uint8
b = np.array([2], dtype=np.uint8)
```


```python
np.unpackbits(b)
```




    array([0, 0, 0, 0, 0, 0, 1, 0], dtype=uint8)



## å­—ç¬¦ä¸²

å­—ç¬¦ä¸²åœ¨`NumPy`ä¸­ä¹Ÿæœ‰å¾ˆå¥½çš„æ”¯æŒã€‚æ‰€æœ‰çš„APIåœ¨`np.char`ä¸‹é¢ï¼Œé’ˆå¯¹ä»¥ä¸‹ä¸¤ç§æ•°æ®ç±»å‹ï¼š


```python
np.str_, np.unicode_, np.str0
```




    (numpy.str_, numpy.str_, numpy.str_)




```python
np.bytes_, np.string_
```




    (numpy.bytes_, numpy.bytes_)



### åŸºæœ¬æ“ä½œ

é¦–å…ˆæ˜¯ä¸€äº›å¸¸ç”¨çš„å­—ç¬¦ä¸²æ“ä½œï¼Œä¸Pythonè‡ªå¸¦çš„ç±»ä¼¼ã€‚


```python
a = np.array(["1", "2"], dtype=np.str_)
b = np.array(["a", "b"], dtype=np.str_)
```

åŠ æ³•å°±æ˜¯å­—ç¬¦çš„æ‹¼æ¥ï¼š


```python
# åŠ æ³•
np.char.add(a, b)
```




    array(['1a', '2b'], dtype='<U2')




```python
np.array([1, 2], dtype=np.bytes_) + np.array([1, 2], dtype=np.bytes_)
```


    ---------------------------------------------------------------------------

    UFuncTypeError                            Traceback (most recent call last)

    <ipython-input-617-49d28b8ba097> in <module>
    ----> 1 np.array([1, 2], dtype=np.bytes_) + np.array([1, 2], dtype=np.bytes_)
    

    UFuncTypeError: ufunc 'add' did not contain a loop with signature matching types (dtype('S1'), dtype('S1')) -> None



```python
np.char.add(np.array([1, 2], dtype=np.bytes_), np.array([1, 2], dtype=np.bytes_))
```




    array([b'11', b'22'], dtype='|S2')




```python
np.char.add(np.array([1, 2], dtype=np.bytes_), np.array([1, 2], dtype=np.str_))
```




    array(['11', '22'], dtype='<U2')



ä¹˜æ³•æ˜¯å­—ç¬¦çš„é‡å¤ï¼š


```python
np.char.multiply(np.array([1],dtype=np.str_), 3)
```




    array(['111'], dtype='<U3')




```python
# æ¬¡æ•°å°äº0æ—¶ä¸º0
np.char.multiply(np.array([1],dtype=np.str_), -3)
```




    array([''], dtype='<U1')



å…¶ä»–APIä¹Ÿä¸strè‡ªå¸¦çš„ç±»ä¼¼ï¼š
- `capitalize`ï¼šé¦–å­—æ¯å¤§å†™
- `title`ï¼šæŒ‰æ ‡é¢˜å¤§å†™
- `center`ï¼šç»™å®šé•¿åº¦å±…ä¸­å¡«å……
- `ljust/rjust`ï¼šç»™å®šé•¿åº¦å·¦å³å¡«å……
- `zfill`ï¼š0å·¦å¡«å……
- `decode/encode`ï¼šè§£ç¼–ç 
- `expandtabs`ï¼štabä¼šè¢«æ›¿æ¢æˆä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼
- `join`ï¼šæ‹¼æ¥
- `lower/upper`ï¼šå¤§å°å†™
- `swapcase`ï¼šå¤§å°å†™äº’æ¢
- `lstrip/rstrip/strip`ï¼šstrip
- `replace`ï¼šæ›¿æ¢
- `translate`ï¼šè½¬æ¢
- `partition/rpatition`ï¼šåˆ†ä¸ºä¸‰å…ƒç»„ï¼ˆå·¦/å³ï¼‰
- `split/splitlines`ï¼šåˆ‡åˆ†


```python
# é¦–å­—æ¯å¤§å†™
np.char.capitalize("ab b c")
```




    array('Ab b c', dtype='<U6')




```python
# æ ‡é¢˜å¤§å†™
np.char.title("ab b c")
```




    array('Ab B C', dtype='<U6')




```python
# ç»™å®šé•¿åº¦å±…ä¸­
(np.char.center("ab", 5, "~"), 
 np.char.ljust("a", 5, "~"), 
 np.char.rjust("a", 5, "~"),
 np.char.zfill("a", 6)
)
```




    (array('~~ab~', dtype='<U5'),
     array('a~~~~', dtype='<U5'),
     array('~~~~a', dtype='<U5'),
     array('00000a', dtype='<U6'))




```python
# ç¼–è§£ç 
np.char.encode("abc", encoding="utf8")
```




    array(b'abc', dtype='|S3')




```python
# æ›¿æ¢tab
val = np.char.expandtabs("\ta", tabsize=1)
val
```




    array(' a', dtype='<U2')




```python
val.tolist(), val.tolist()[0] == " "
```




    (' a', True)




```python
# æ‹¼æ¥
np.char.join("a", "12345")
```




    array('1a2a3a4a5', dtype='<U9')




```python
# å¤§å°å†™
np.char.lower(np.array(["A"],dtype=np.str_)), np.char.upper("a")
```




    (array(['a'], dtype='<U1'), array('A', dtype='<U1'))




```python
# äº’æ¢
np.char.swapcase("aBc")
```




    array('AbC', dtype='<U3')




```python
# strip
np.char.strip("abc "), np.char.strip("abc", "c")
```




    (array('abc', dtype='<U4'), array('ab', dtype='<U3'))




```python
# replace
np.char.replace("aaabc", "a", "A", count=2)
```




    array('AAabc', dtype='<U5')




```python
# è½¬æ¢
np.char.translate(["abc", "a"],  "1"*255, deletechars=None)
```




    array(['111', '1'], dtype='<U3')




```python
# éunicodeæ—¶æ‰ä¼šåˆ é™¤
np.char.translate(
    np.array(["abc", "a"], dtype=np.bytes_), b"1"*256, deletechars=b"a")
```




    array([b'11', b''], dtype='|S3')




```python
# partition
(
    np.char.partition("abc", "b"), 
    np.char.rpartition("abc", "b"),
    np.char.partition("abca", "a"),
    np.char.rpartition("abca", "a")
)
```




    (array(['a', 'b', 'c'], dtype='<U1'),
     array(['a', 'b', 'c'], dtype='<U1'),
     array(['', 'a', 'bca'], dtype='<U3'),
     array(['abc', 'a', ''], dtype='<U3'))




```python
# split
np.char.split("a b c", " "), np.char.splitlines("a\nb\nc")
```




    (array(list(['a', 'b', 'c']), dtype=object),
     array(list(['a', 'b', 'c']), dtype=object))



### æ¯”è¾ƒ

ä¸»è¦æ¯”è¾ƒå­—ç¬¦ä¸²å¤§å°ç›¸ç­‰ã€‚


```python
np.char.equal(["abc", "ab"], ["abd", "ab"])
```




    array([False,  True])




```python
np.char.not_equal(["abc", "ab"], ["abd", "ab"])
```




    array([ True, False])




```python
# >=
np.char.greater_equal(["abc", "ab"], ["abd", "ab"]), "abc">"abd"
```




    (array([False,  True]), False)




```python
np.char.greater(["abc", "ab"], ["abd", "ab"])
```




    array([False, False])




```python
# <=
np.char.less_equal(["abc", "ab"], ["abd", "ab"])
```




    array([ True,  True])




```python
np.char.less(["abc", "ab"], ["abd", "ab"])
```




    array([ True, False])




```python
# æ¯”è¾ƒ
# cmpå¯ä»¥å– < <= == >= > !=
np.char.compare_chararrays(
    ["abc", "ab", "a"],
    ["ab", "ad", "ae"],
    cmp="<",
    rstrip=True
)
```




    array([False,  True,  True])



### åŸºæœ¬ä¿¡æ¯

åŒ…æ‹¬åŸºæœ¬çš„åˆ¤æ–­å’Œç»Ÿè®¡ã€‚


```python
np.char.count("abcab", "a", start=0, end=None)
```




    array(2)




```python
np.char.str_len(["abcab", "a"])
```




    array([5, 1])




```python
(
    np.char.find("abcab", "a", start=0, end=None),
    np.char.rfind("abcab", "a", start=0, end=None)
)
```




    (array(0), array(3))




```python
# æ‰¾ä¸åˆ°è¿”å›-1
np.char.find("abcab", "d", start=2, end=None)
```




    array(-1)




```python
(
    np.char.index("abcab", "a", start=0),
    np.char.rindex("abcab", "a", start=0)
)
```




    (array(0), array(3))




```python
# æ‰¾ä¸åˆ°æŠ›å‡ºå¼‚å¸¸
np.char.index("abcab", "d", start=2)
```


    ---------------------------------------------------------------------------

    ValueError                                Traceback (most recent call last)

    <ipython-input-908-6904110ea61f> in <module>
          1 # æ‰¾ä¸åˆ°æŠ›å‡ºå¼‚å¸¸
    ----> 2 np.char.index("abcab", "d", start=2)
    

    /usr/local/lib/python3.8/site-packages/numpy/core/overrides.py in index(*args, **kwargs)
    

    /usr/local/lib/python3.8/site-packages/numpy/core/defchararray.py in index(a, sub, start, end)
        742 
        743     """
    --> 744     return _vec_string(
        745         a, int_, 'index', [sub, start] + _clean_args(end))
        746 
    

    ValueError: substring not found



```python
# starts/ends
(
    np.char.endswith(["a", "ba"], "a", start=0, end=1),
    np.char.startswith(["a", "ba"], "a", start=1, end=3)
)
```




    (array([ True, False]), array([False,  True]))




```python
# åªæœ‰ç©ºæ ¼
np.char.isspace(["   \t\n", "a"])
```




    array([ True, False])




```python
# æ‰€æœ‰å­—ç¬¦å°/å¤§å†™ï¼Œé¦–å­—æ¯å¤§å†™
(
    np.char.islower(["a", "Ab"]), 
    np.char.isupper(["a", "Ab", "AB"]),
    np.char.istitle(["Aa", "aB", "AB"])
)
```




    (array([ True, False]),
     array([False, False,  True]),
     array([ True, False, False]))




```python
# åˆ¤æ–­
lst = ["a", "1", "01", "ï¼ï¼“", "â’Šâ’", "a1", "1.1", ""]
(
    # æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰å­—ç¬¦éƒ½ä¸ºå­—æ¯ï¼Œè‡³å°‘ä¸€ä¸ªå­—ç¬¦
    np.char.isalpha(lst),
    # åŒä¸Šï¼Œå­—æ¯æˆ–æ•°å­—
    np.char.isalnum(lst),
    "",
    # åªæœ‰decimalï¼ˆå°æ•°ç‚¹ä¸ç®—ï¼‰
    np.char.isdecimal(lst),
    # åªæœ‰digit
    np.char.isdigit(lst),
    # åªæœ‰numeric
    np.char.isnumeric(lst)
)
```




    (array([ True, False, False, False, False, False, False, False]),
     array([ True,  True,  True,  True,  True,  True, False, False]),
     '',
     array([False,  True,  True,  True, False, False, False, False]),
     array([False,  True,  True,  True,  True, False, False, False]),
     array([False,  True,  True,  True,  True, False, False, False]))



å…³äºdecimalã€digitå’Œnumericçš„åŒºåˆ«å¯å‚è€ƒï¼š

- [string - What's the difference between str.isdigit, isnumeric and isdecimal in python? - Stack Overflow](https://stackoverflow.com/questions/44891070/whats-the-difference-between-str-isdigit-isnumeric-and-isdecimal-in-python)

å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨å¤„ç†unicodeçš„æ–¹å¼ä¸Šã€‚

## å°ç»“

## å‚è€ƒ

- [NumPy documentation â€” NumPy v1.23.dev0 Manual](https://numpy.org/devdocs/index.html)
- [python - Memory growth with broadcast operations in NumPy - Stack Overflow](https://stackoverflow.com/questions/31536504/memory-growth-with-broadcast-operations-in-numpy)


```python

```
